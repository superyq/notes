# 自定义指令

1. 生命周期

```
bind(){} 绑定触发,触发一次
inserted(){} 元素插入父元素时触发,但不保证,父元素已经插入了 DOM 文档.
update(){} 所在组件的VNode更新时调用.
componentUpdate(){} 元素状态发生改变时触发(包裹内容,样式)
unbind(){} 元素从DOM删除时触发.(仅仅是删除)
```

2. 钩子函数参数

el：绑定指令的那个dom元素

binding：一个对象

* name：v-gqs ==> gqs 不包括前面的v-
* valule：指令后面的值 v-gqs='abc' value=abc
* oldValue：前一个值,只能在 update & componentUpdate 中使用.
* expression：v-gqs='1+1',如果是 value = 2 ,如果是 expression = 1 + 1
* arg：指令传递的参数 ,比如 v-gqs:hello arg = hello
* modifiers：比如 v-gqs.a.b modifiers = {a:true,b:true}

vnode：Vue编译生成的虚拟节点.
oldVnode：上一个虚拟节点,仅在 update & componentUpdated 中可用

3. 例子

```
Vue.directive('color-swatch', {
  // 默认情况下只有 bind 和 inserted 声明周期函数触发了
  bind() {},
  inserted() {},
  update() {},
  componentUpdated() {},
  unbind() {}
})

\\ 简写
Vue.directive('color-swatch', function (el, binding) {
  el.style.backgroundColor = binding.value
})
```
