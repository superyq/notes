# 什么是 Egg.js

Egg.js 是一款基于 Node.js 的企业级应用开发框架

一、特点

1. 插件化

通过插件机制，Egg.js 可以轻松扩展各种功能，如数据库操作、缓存、日志等，并且插件之间可以很好地协同工作，提升开发效率。

2. 多进程模型

采用 Master-Worker 多进程模型，Master 进程负责管理 Worker 进程，Worker 进程负责处理具体的请求，这种架构能够充分利用服务器的多核性能，提高应用的稳定性和性能。

3. 约定优于配置

遵循一定的项目结构和约定，减少了开发者的配置工作，使项目结构更加清晰，易于维护。

4. 高度可扩展

提供了丰富的扩展点，开发者可以在框架的基础上进行深度定制和扩展，满足各种复杂的业务需求。

5. 与阿里生态融合

作为阿里系的框架，与阿里的各种云服务和技术栈有很好的集成，如阿里云的数据库、缓存、消息队列等，方便开发者构建基于阿里生态的应用。

二、核心概念

1. Application 和 Context

Application 是整个应用的实例，代表了整个 Egg 应用，包含了应用的生命周期管理、插件加载、中间件管理等功能。Context 是请求上下文，每个请求都会创建一个新的 Context 实例，包含了与当前请求相关的信息，如请求对象、响应对象、路由信息等，开发者可以在 Context 中获取和处理请求相关的数据。

2. Controller 和 Service

Controller 负责处理用户的请求，接收请求参数，调用 Service 处理业务逻辑，然后将结果返回给用户。Service 则主要负责业务逻辑的处理，将复杂的业务逻辑封装在 Service 中，提高代码的可维护性和复用性。

3. Middleware

中间件是 Egg.js 中非常重要的概念，它可以在请求处理的过程中对请求和响应进行拦截和处理，如进行请求验证、日志记录、权限控制等。中间件可以按照一定的顺序链式调用，实现对请求的多级处理。

4. Router

用于定义应用的路由规则，将不同的 URL 路径映射到相应的 Controller 方法上，实现请求的路由分发。

三、应用场景

1. Web 应用开发

适用于构建各种类型的 Web 应用，如企业级管理系统、电商平台、内容管理系统等，能够快速搭建稳定、高效的 Web 服务。

2. API 服务开发

可以方便地构建 RESTful API 服务，为前端应用或其他后端应用提供数据接口，支持多种请求方法和参数处理。

3. 微服务架构

在微服务架构中，Egg.js 可以作为微服务的开发框架，与其他微服务框架和技术配合使用，实现服务的拆分和治理。

四、基本使用

1. 安装与初始化

通过 npm 或 yarn 安装 Egg.js 的脚手架工具，然后使用脚手架初始化一个 Egg.js 项目，按照提示进行项目配置和依赖安装。

2. 路由定义

在项目的`router.js`文件中定义路由规则，指定 URL 路径和对应的 Controller 方法。

3. Controller 编写

在`app/controller`目录下创建 Controller 文件，编写处理请求的方法，通过`ctx`对象获取请求参数和调用 Service 方法。

4. Service 编写

在`app/service`目录下创建 Service 文件，实现具体的业务逻辑方法，可在 Service 中进行数据库操作、数据处理等。

5. 中间件使用

在`app/middleware`目录下创建中间件文件，编写中间件函数，然后在`config/config.default.js`文件中配置中间件的使用顺序和参数。
