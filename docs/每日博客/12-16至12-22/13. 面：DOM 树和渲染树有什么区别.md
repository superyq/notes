# DOM 树和渲染树有什么区别

一、构建目的

1. DOM 树（Document Object Model Tree）

DOM 树主要是对 HTML 文档结构的一种抽象表示，它的目的是方便 JavaScript 等脚本语言对文档进行操作。通过 DOM 树，开发者可以访问、修改文档中的元素、属性和文本内容等。

2. 渲染树（Render Tree）

渲染树是用于浏览器进行页面渲染的模型。它主要考虑了元素的可见性和布局信息，用于确定页面最终的视觉呈现，即哪些元素需要被绘制到屏幕上以及它们的位置、大小等信息。

二、包含内容

1. DOM 树

包含了 HTML 文档中的所有元素节点、属性节点和文本节点。无论是可见的还是不可见的元素，只要在 HTML 文档中有定义，就会在 DOM 树中有对应的节点。

2. 渲染树

只包含可见的元素以及用于布局这些可见元素的相关信息。除了排除不可见元素（如`display: none`的元素）外，还会对一些伪元素（如`::before`、`::after`）进行特殊处理。如果伪元素有实际的视觉效果（如添加了内容或者样式），它们会被包含在渲染树中，用于最终的页面绘制。

三、结构差异

1. DOM 树

它的结构与 HTML 文档的结构紧密相关，基本是按照 HTML 标签的嵌套顺序来构建的。从根节点`html`开始，向下依次包含`head`、`body`等子节点，每个子节点又包含对应的标签节点。

2. 渲染树

其结构可能与 DOM 树有所不同，因为它会根据元素的布局和可见性进行调整。

四、更新频率和机制

1. DOM 树

可以通过 JavaScript 代码随时进行更新。

2. 渲染树

通常是在 DOM 树更新后，或者 CSS 样式发生变化时进行更新。当需要重新计算页面布局或者绘制时，浏览器会根据新的 DOM 树和 CSS 样式重新构建或更新渲染树。不过，浏览器会尽量避免不必要的渲染树更新，例如，通过比较新的 DOM 树和 CSS 样式与之前的状态，判断是否真的需要重新构建渲染树，以提高性能。
