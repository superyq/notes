# node 中的 zod 模块

在 Node.js 中，Zod 是一个用于数据验证和类型安全解析的库。

**一、数据验证方面**

- **类型推断**：Zod 允许你以一种声明式的方式定义数据的形状（schema），基于这个 schema 可以对输入的数据进行验证。例如，你可以定义一个对象应该包含哪些属性，每个属性应该是什么类型（字符串、数字、数组等）。

```javascript
const z = require("zod");
const userSchema = z.object({
  name: z.string(),
  age: z.number(),
});
```

- **复杂验证规则**：除了基本的类型检查，Zod 还支持复杂的验证规则。例如，可以指定字符串的长度、数字的范围、数组的元素个数等。

```javascript
const passwordSchema = z.string().min(8).max(20);
```

**二、类型安全解析**

- **安全的数据访问**：当数据通过 Zod 的 schema 验证后，你可以安全地按照定义的类型结构来访问数据，避免了运行时因为数据类型不符合预期而导致的错误。

```javascript
try {
  const userData = userSchema.parse({ name: "John", age: "not a number" });
  console.log(userData.name);
} catch (error) {
  console.log("Validation failed:", error);
}
```

- **与 TypeScript 集成**：在 TypeScript 项目中，Zod 可以根据你定义的 schema 自动生成相应的类型定义，这样在整个代码库中可以确保数据在不同的函数和模块之间传递时保持类型安全。

```javascript
// Zod schema
const schema = z.object({
  id: z.number(),
  name: z.string(),
});

// The type of the parsed data will be inferred as { id: number, name: string }
const data = schema.parse({ id: 1, name: "example" });
```
