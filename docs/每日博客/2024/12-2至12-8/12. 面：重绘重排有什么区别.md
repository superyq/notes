# 重绘重排有什么区别

一、重绘（Repaint）

1. 定义

重绘是指当元素的外观（如颜色、背景色等不影响布局的样式）发生改变时，浏览器对该元素进行重新绘制的过程。

2. 原理

浏览器会根据新的样式信息，在不改变元素的几何形状和位置的情况下，重新绘制元素的外观。这个过程相对比较轻量级，因为它不涉及元素的布局计算。

3. 性能影响

重绘操作的性能开销相对较小。

4. 示例代码

```css
.box {
  width: 200px;
  height: 200px;
  background - color: blue;
}
.box:hover {
  background - color: red;
}
```

二、重排（Reflow），也称为回流

1. 定义

重排是指当文档的布局（如元素的大小、位置、隐藏或显示等影响布局的操作）发生改变时，浏览器需要重新计算元素的几何属性（位置、大小等），并重新构建渲染树的过程。

2. 原理

浏览器会从根元素开始，重新计算整个文档的布局。这涉及到对每个元素的位置、大小等几何属性的重新计算，以及重新构建渲染树，是一个比较复杂和消耗资源的过程。

3. 性能影响

重排的性能开销很大。由于它会导致浏览器重新计算整个文档的布局，一个小小的布局改变可能会引发一系列的连锁反应，导致大量元素的重新计算和重新绘制。因此，应该尽量避免频繁地触发重排，以提高网页的性能。

4. 示例代码

```javascript
const box = document.getElementById("box");
box.style.width = "300px";
```

三、两者的关系和区别总结

1. 关系

重排必然会导致重绘，因为当布局发生改变后，元素的外观也需要重新绘制。但是重绘不一定会导致重排，只有当元素的外观改变不影响布局时，才只会触发重绘。

2. 区别

2.1 触发条件

重绘主要由改变元素外观的样式属性触发，而重排主要由改变元素布局的操作触发。

2.2 性能开销

重排的性能开销远远大于重绘，因为重排涉及到复杂的布局计算和渲染树重建。

2.3 对文档的影响范围

重排会影响整个文档的布局计算，可能会导致多个元素的位置和大小改变；而重绘通常只影响单个元素或少数元素的外观。
